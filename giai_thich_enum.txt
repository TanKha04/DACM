GIẢI THÍCH KIỂU DỮ LIỆU ENUM TRONG CƠ SỞ DỮ LIỆU


1. ENUM là gì?

ENUM (Enumeration) là kiểu dữ liệu trong MySQL cho phép định nghĩa một tập hợp các giá trị cố định mà cột đó có thể nhận. Khi khai báo ENUM, ta liệt kê sẵn các giá trị hợp lệ và cột chỉ được phép lưu một trong những giá trị đó.


2. Cú pháp khai báo

ten_cot ENUM('giá_trị_1', 'giá_trị_2', 'giá_trị_3') DEFAULT 'giá_trị_mặc_định'


3. Các trường ENUM trong hệ thống

Bảng USERS (Người dùng)
Cột	Giá trị ENUM	Ý nghĩa
role	'customer', 'seller', 'shipper'	Vai trò người dùng: Khách hàng, Người bán, Người giao hàng
status	'active', 'pending', 'blocked'	Trạng thái tài khoản: Hoạt động, Chờ duyệt, Bị khóa

Bảng SHOPS (Cửa hàng)
Cột	Giá trị ENUM	Ý nghĩa
status	'active', 'pending', 'blocked'	Trạng thái cửa hàng: Hoạt động, Chờ duyệt, Bị khóa

Bảng PRODUCTS (Sản phẩm)
Cột	Giá trị ENUM	Ý nghĩa
status	'active', 'hidden', 'deleted'	Trạng thái sản phẩm: Đang bán, Ẩn, Đã xóa

Bảng ORDERS (Đơn hàng)
Cột	Giá trị ENUM	Ý nghĩa
status	'pending', 'confirmed', 'preparing', 'ready', 'picked', 'delivering', 'delivered', 'cancelled'	Trạng thái đơn hàng: Chờ xác nhận, Đã xác nhận, Đang chuẩn bị, Sẵn sàng, Đã lấy hàng, Đang giao, Đã giao, Đã hủy
payment_method	'cash', 'card', 'ewallet'	Phương thức thanh toán: Tiền mặt, Thẻ ngân hàng, Ví điện tử
payment_status	'pending', 'paid', 'failed'	Trạng thái thanh toán: Chờ thanh toán, Đã thanh toán, Thất bại
cancelled_by	'customer', 'seller', 'admin'	Người hủy đơn: Khách hàng, Người bán, Quản trị viên

Bảng PAYMENTS (Thanh toán)
Cột	Giá trị ENUM	Ý nghĩa
method	'cash', 'card', 'ewallet'	Phương thức: Tiền mặt, Thẻ, Ví điện tử
status	'pending', 'completed', 'failed', 'refunded'	Trạng thái: Chờ xử lý, Hoàn thành, Thất bại, Đã hoàn tiền

Bảng REVIEWS (Đánh giá)
Cột	Giá trị ENUM	Ý nghĩa
status	'active', 'hidden'	Trạng thái đánh giá: Hiển thị, Ẩn

Bảng NOTIFICATIONS (Thông báo)
Cột	Giá trị ENUM	Ý nghĩa
type	'order', 'system', 'promo'	Loại thông báo: Đơn hàng, Hệ thống, Khuyến mãi

Bảng PROMOTIONS (Khuyến mãi)
Cột	Giá trị ENUM	Ý nghĩa
type	'percent', 'fixed', 'freeship', 'gift', 'combo'	Loại khuyến mãi: Giảm %, Giảm cố định, Miễn phí ship, Tặng quà, Combo
status	'active', 'inactive', 'expired'	Trạng thái: Hoạt động, Tạm dừng, Hết hạn

Bảng VOUCHERS (Voucher)
Cột	Giá trị ENUM	Ý nghĩa
type	'percent', 'fixed', 'freeship'	Loại voucher: Giảm %, Giảm cố định, Miễn phí ship
apply_to	'all', 'new_user', 'vip'	Áp dụng cho: Tất cả, Người dùng mới, VIP
status	'active', 'inactive', 'expired'	Trạng thái: Hoạt động, Tạm dừng, Hết hạn

Bảng SUPPORT_TICKETS (Yêu cầu hỗ trợ)
Cột	Giá trị ENUM	Ý nghĩa
category	'account', 'order', 'payment', 'technical', 'other'	Danh mục: Tài khoản, Đơn hàng, Thanh toán, Kỹ thuật, Khác
status	'open', 'processing', 'resolved', 'closed'	Trạng thái: Mở, Đang xử lý, Đã giải quyết, Đã đóng
priority	'low', 'medium', 'high'	Độ ưu tiên: Thấp, Trung bình, Cao


4. Ưu điểm của ENUM

- Giới hạn giá trị: Chỉ cho phép nhập các giá trị đã định nghĩa sẵn, tránh sai sót dữ liệu
- Tiết kiệm bộ nhớ: MySQL lưu ENUM dưới dạng số nguyên (1, 2, 3...) thay vì chuỗi ký tự
- Dễ đọc: Code và truy vấn SQL dễ hiểu hơn khi dùng tên có ý nghĩa
- Tính nhất quán: Đảm bảo dữ liệu đồng nhất trong toàn bộ hệ thống
- Hiệu suất: Truy vấn và so sánh nhanh hơn so với VARCHAR


5. Ví dụ sử dụng

Khai báo trong SQL:
role ENUM('customer', 'seller', 'shipper') DEFAULT 'customer'

Truy vấn lọc theo ENUM:
SELECT * FROM users WHERE role = 'seller'
SELECT * FROM orders WHERE status = 'pending'

Cập nhật giá trị ENUM:
UPDATE orders SET status = 'confirmed' WHERE id = 1
