MÔ TẢ CÁC BẢNG TRONG SƠ ĐỒ MLD (Mô hình Logic Dữ liệu)

Bảng 2.1 Bảng USERS (Người dùng)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã người dùng	Integer	PRIMARY KEY
name	Tên người dùng	VARCHAR(100)	NOT NULL
email	Địa chỉ email	VARCHAR(100)	NOT NULL, UNIQUE
password	Mật khẩu đã mã hóa	VARCHAR(255)	NOT NULL
phone	Số điện thoại	VARCHAR(20)	
role	Vai trò người dùng	ENUM	NOT NULL
status	Trạng thái tài khoản	ENUM	NOT NULL


Bảng 2.2 Bảng SHOPS (Cửa hàng)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã cửa hàng	Integer	PRIMARY KEY
name	Tên cửa hàng	VARCHAR(100)	NOT NULL
description	Mô tả cửa hàng	Text	
address	Địa chỉ cửa hàng	Text	NOT NULL
phone	Số điện thoại	VARCHAR(20)	
status	Trạng thái hoạt động	ENUM	NOT NULL
user_id	Mã chủ cửa hàng	Integer	FOREIGN KEY (USERS.id)


Bảng 2.3 Bảng PRODUCTS (Sản phẩm)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã sản phẩm	Integer	PRIMARY KEY
name	Tên sản phẩm	VARCHAR(100)	NOT NULL
description	Mô tả sản phẩm	Text	
price	Giá sản phẩm	Decimal(10,2)	NOT NULL
category	Danh mục sản phẩm	VARCHAR(50)	
status	Trạng thái sản phẩm	ENUM	NOT NULL
shop_id	Mã cửa hàng	Integer	FOREIGN KEY (SHOPS.id)


Bảng 2.4 Bảng ORDERS (Đơn hàng)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã đơn hàng	Integer	PRIMARY KEY
total_amount	Tổng tiền đơn hàng	Decimal(10,2)	NOT NULL
shipping_fee	Phí vận chuyển	Decimal(10,2)	
delivery_address	Địa chỉ giao hàng	Text	NOT NULL
status	Trạng thái đơn hàng	ENUM	NOT NULL
payment_method	Phương thức thanh toán	ENUM	NOT NULL
payment_status	Trạng thái thanh toán	ENUM	NOT NULL
created	Thời gian tạo đơn	Timestamp	NOT NULL
customer_id	Mã khách hàng đặt hàng	Integer	FOREIGN KEY (USERS.id)
shipper_id	Mã shipper giao hàng	Integer	FOREIGN KEY (USERS.id)
shop_id	Mã cửa hàng	Integer	FOREIGN KEY (SHOPS.id)


Bảng 2.5 Bảng ORDER_ITEMS (Chi tiết đơn hàng)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã chi tiết đơn hàng	Integer	PRIMARY KEY
product_name	Tên sản phẩm	VARCHAR(150)	NOT NULL
quantity	Số lượng	Integer	NOT NULL
price	Đơn giá	Decimal(10,2)	NOT NULL
subtotal	Thành tiền	Decimal(10,2)	NOT NULL
order_id	Mã đơn hàng	Integer	FOREIGN KEY (ORDERS.id)
product_id	Mã sản phẩm	Integer	FOREIGN KEY (PRODUCTS.id)


Bảng 2.6 Bảng CART (Giỏ hàng)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã giỏ hàng	Integer	PRIMARY KEY
quantity	Số lượng sản phẩm	Integer	NOT NULL
created_at	Thời gian thêm vào giỏ	Timestamp	NOT NULL
user_id	Mã người dùng	Integer	FOREIGN KEY (USERS.id)
product_id	Mã sản phẩm	Integer	FOREIGN KEY (PRODUCTS.id)


Bảng 2.7 Bảng REVIEWS (Đánh giá)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã đánh giá	Integer	PRIMARY KEY
rating	Điểm đánh giá (1-5)	Integer	NOT NULL
comment	Nội dung đánh giá	Text	
reply	Phản hồi từ cửa hàng	Text	
created	Thời gian đánh giá	Timestamp	NOT NULL
user_id	Mã người đánh giá	Integer	FOREIGN KEY (USERS.id)
order_id	Mã đơn hàng	Integer	FOREIGN KEY (ORDERS.id)


Bảng 2.8 Bảng PAYMENTS (Thanh toán)

Thuộc tính	Mô tả	Kiểu dữ liệu	Ràng buộc
id	Mã thanh toán	Integer	PRIMARY KEY
amount	Số tiền thanh toán	Decimal(10,2)	NOT NULL
method	Phương thức thanh toán	ENUM	NOT NULL
status	Trạng thái thanh toán	ENUM	NOT NULL
transaction_id	Mã giao dịch	VARCHAR(100)	
order_id	Mã đơn hàng	Integer	FOREIGN KEY (ORDERS.id)


MÔ TẢ CÁC MỐI QUAN HỆ TRONG MLD

Quan hệ	Bảng 1	Bảng 2	Khóa ngoại	Mô tả
so_huu	USERS	SHOPS	SHOPS.user_id → USERS.id	Người dùng sở hữu cửa hàng
thuoc_shop	SHOPS	PRODUCTS	PRODUCTS.shop_id → SHOPS.id	Sản phẩm thuộc cửa hàng
ban	SHOPS	ORDERS	ORDERS.shop_id → SHOPS.id	Cửa hàng bán đơn hàng
dat_hang	USERS	ORDERS	ORDERS.customer_id → USERS.id	Khách hàng đặt đơn hàng
giao_hang	USERS	ORDERS	ORDERS.shipper_id → USERS.id	Shipper giao đơn hàng
chua	ORDERS	ORDER_ITEMS	ORDER_ITEMS.order_id → ORDERS.id	Đơn hàng chứa chi tiết
san_pham	PRODUCTS	ORDER_ITEMS	ORDER_ITEMS.product_id → PRODUCTS.id	Sản phẩm trong chi tiết đơn
them_gio	USERS	CART	CART.user_id → USERS.id	Người dùng thêm vào giỏ
cart_products	PRODUCTS	CART	CART.product_id → PRODUCTS.id	Sản phẩm trong giỏ hàng
danh_gia	USERS	REVIEWS	REVIEWS.user_id → USERS.id	Người dùng đánh giá
review_order	ORDERS	REVIEWS	REVIEWS.order_id → ORDERS.id	Đánh giá cho đơn hàng
thanh_toan	ORDERS	PAYMENTS	PAYMENTS.order_id → ORDERS.id	Thanh toán cho đơn hàng
